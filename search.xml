<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[hexo 创建与主题修改(基于next)]]></title>
      <url>http://tianzhihen.github.io/2016/06/21/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>可以使用命令简写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo n &quot;My New Post&quot;</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>可以使用命令简写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>可以使用命令简写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>可以使用命令简写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>
<p>在部署之前需要安装一个npm包:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git</span><br></pre></td></tr></table></figure>
<p>然后需要早项目配置文件中添加部署的地址,以github为例:<br>Deployment<br>Docs: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">https://hexo.io/docs/deployment.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: git@github.com:tianzhihen/tianzhihen.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
<h3 id="添加多说"><a href="#添加多说" class="headerlink" title="添加多说"></a>添加多说</h3><p>登陆多说 <a href="http://duoshuo.com/" target="_blank" rel="external">多说</a><br>在主题配置文件中修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">duoshuo_shortname: hexoblogwq</span><br></pre></td></tr></table></figure>
<h3 id="添加搜索"><a href="#添加搜索" class="headerlink" title="添加搜索"></a>添加搜索</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure>
<p>在项目配置文件中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[me909 usb debug]]></title>
      <url>http://tianzhihen.github.io/2016/06/21/me909-usb-debug/</url>
      <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>还没有找到stm32 与 华为通信模块通过USB通信的例子，本贴直播调试usb host的全过程，如果有搞过的请跟帖帮忙分析一下。</p>
<a id="more"></a>
<h2 id="已经知道的东西"><a href="#已经知道的东西" class="headerlink" title="已经知道的东西"></a>已经知道的东西</h2><p>1.华为me909 usb属于usb device，是cdc类。<br>2.stm32F4具备usb host功能，可以使用官方提供的usb库进行设计，最新的usb库为2.2.0版本。</p>
<p>3.移植了usb hid的例子，stm32F4作为host 与鼠标进行通信，完成。使用的是PA11 和 PA12脚，FS（全速模式）。</p>
<p>4.华为me909为自供电usb设备，因此当usb出现故障的时候不能通过插拔usb接口对usb进行复位，好在me909有复位引脚，经测试，通过模块本身的复位引脚对模块进行复位后，usb可以重新与stm32建立连接，相当于重新插拔USB接头。对于后期调试准备了下下策。</p>
<h2 id="正在进行的工作"><a href="#正在进行的工作" class="headerlink" title="正在进行的工作"></a>正在进行的工作</h2><p>2016/3/9/17:43之前<br>移植了官方usb host CDC的例子，结合原子提供的hid的例程进行调试，未果，只能进行到“USBH_USR_DeviceAddressAssigned（从机分配地址成功）“这一步，后续还没进展。现在怎么突破枚举的问题正在开展，阅读源码是必要的。</p>
<p>截止至2016/3/9/17:43<br>设备已经枚举成功，终于迈出了第一步，调试过程：跟踪调试，发现程序在 usbh_stdreq.c 第479行时if ( cfg_desc-&gt;bNumInterfaces &lt;= USBH_MAX_NUM_INTERFACES)  解析描述信息后会检查接口数是否在设定的范围内，华为的接口数为6个大于在 usbh_conf.h设置的例程中的 2个接口，所以枚举失败。改为6后，并把最对endpoint（端点数） 设置为3（在华为的 USB Interface Descriptor Guide文件中说明）。枚举成功！<br>但是提示的是不支持的设备，正在进一步调试，趁热打铁！ </p>
<p>截止至2016/3/9/18:03<br>打印出各个接口的信息<br>bInterfaceClass: 00FFh,bInterfaceSubClass: 0006h,bInterfaceProtocol: 0010h<br>bInterfaceClass: 00FFh,bInterfaceSubClass: 0006h,bInterfaceProtocol: 0013h<br>bInterfaceClass: 00FFh,bInterfaceSubClass: 0006h,bInterfaceProtocol: 0012h<br>bInterfaceClass: 00FFh,bInterfaceSubClass: 0006h,bInterfaceProtocol: 0016h<br>bInterfaceClass: 00FFh,bInterfaceSubClass: 0006h,bInterfaceProtocol: 0006h<br>bInterfaceClass: 00FFh,bInterfaceSubClass: 0006h,bInterfaceProtocol: 001Bh<br>跟手册完全一致  ^-^</p>
<p>截止至2016/3/11/12:03<br>将端点 按照华为模块手册说明进行设置。有时可以接收到数据，但是概率很低，调试时发现在<br>CDC_ProcessReception(USB_OTG_CORE_HANDLE <em>pdev, USBH_HOST </em>phost)  函数中<br>URB_STATE URB_StatusRx =   HCD_GetURB_State(pdev , CDC_Machine.CDC_DataItf.hc_num_in);时</p>
<p>URB_StatusRx  的值为 URB_ERROR</p>
<p>查找发生这个错误的原因 在一个中断处理函数中<br>    else if((pdev-&gt;host.HC_Status[num] == HC_XACTERR) ||<br>            (pdev-&gt;host.HC_Status[num] == HC_DATATGLERR))<br>    {<br>      pdev-&gt;host.ErrCnt[num] = 0;<br>      pdev-&gt;host.URB_State[num] = URB_ERROR;<br>    }</p>
<p>引用香水城的描述<br>同样查看XACTERR和DATAEGLERR的置位原因，找到对应的寄存器，即OTG_FS_HCINTx中的【TXERR】和【DTERR】位被硬件置</p>
<blockquote>
<p>【TXERR】：Transaction error，可能是CRC校验错误、超时、比特填充错误、或者错误的EOP<br>【DTERR】：Data toggle error，表示收、发双方的数据同步位不再同步，可能是主机处理不当，也有可能是设备处理不当。最直观的方法是使用USB分析仪，看出错前的总线通信来判断是谁没有正确处理数据同步位的翻转。</p>
</blockquote>
<p>截止至2016/3/11 15:24确定为XACTERR错误，等待进一步调试</p>
<p>截止至2016/3/14<br>结帖：因为根据调试信息看是硬件问题，所以买了一个带usbhost接口的开发板进行调试。今天板子刚到。。。<br>烧程序，测试成功！果然是硬件问题！！！ 问题解决。</p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>keil 在编译完出线这个警告，没有找到是什么问题，但是结果是 0错误 0警告。有知道什么问题的请回复下。</p>
<p><img src="http://img.blog.csdn.net/20160309161410977" alt="这里写图片描述"></p>
]]></content>
    </entry>
    
  
  
</search>
